---
phase: 03-history-stats
plan: '03'
type: execute
wave: 2
depends_on: [03-01, 03-02]
files_modified: []
autonomous: true
requirements: []

must_haves:
  truths:
    - "User can switch between Timer, History, and Stats views"
    - "Timer functionality works unchanged"
    - "History view displays full session list with filtering"
    - "Stats view displays all 4 stat cards"
  artifacts:
    - path: "src/App.tsx"
      provides: "Updated with view toggle navigation"
  key_links:
    - from: "App.tsx"
      to: "HistoryList"
      via: "viewMode state"
    - from: "App.tsx"
      to: "StatsGrid"
      via: "viewMode state"
---

<objective>
Integrate History and Stats into the app with a simple toggle between History/Stats views.

Purpose: Allow Timer and users to access history list and stats alongside the timer.
Output: Updated App.tsx with view toggle, renders HistoryList and StatsGrid.
</objective>

<execution_context>
@/Users/michaelrobert/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelrobert/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-history-stats/03-CONTEXT.md
@.planning/phases/03-history-stats/03-RESEARCH.md
@src/App.tsx
@src/components/history/HistoryList.tsx
@src/components/history/HistoryDrawer.tsx
@src/components/stats/StatsGrid.tsx
@.planning/phases/02-session-management/02-03-SUMMARY.md

# Notes
- This plan integrates History and Stats views into App.tsx
- Uses simple view toggle (will be replaced by tabs in Phase 4)
- All Phase 3 components (History, Stats) completed in Plans 01 and 02
</context>

<tasks>

<task type="auto">
  <name>Create simple view toggle for navigation</name>
  <files>src/App.tsx</files>
  <action>
Update App.tsx to include:

1. Add state for view mode:
   ```typescript
   type ViewMode = 'timer' | 'history' | 'stats'
   const [viewMode, setViewMode] = useState<ViewMode>('timer')
   ```

2. Add navigation buttons (simple text buttons, styled minimally):
   - Timer link/button (always visible when in other views)
   - History link/button
   - Stats link/button
   - Position: Top of screen, maybe below the Help/Settings buttons
   - This is minimal navigation - will be replaced by proper tabs in Phase 4

3. Conditionally render based on viewMode:
   - 'timer': Current timer UI (TimerDisplay, TimerControls, NotePanel, TagInput)
   - 'history': HistoryList + HistoryDrawer (slide-out drawer on item click)
   - 'stats': StatsGrid

4. For History view:
   - Import HistoryList and HistoryDrawer
   - Add state: selectedSession: SessionRecord | null
   - When user clicks HistoryItem in list, set selectedSession and open drawer
   - HistoryDrawer onClose clears selectedSession

5. For Stats view:
   - Import StatsGrid
   - Show stats in main content area

Keep existing timer functionality intact.
  </action>
  <verify>
- Build passes: npm run build
- Timer view works as before
- Can switch to History view
- Can switch to Stats view
- History drawer opens on item click
- Navigation buttons visible
  </verify>
  <done>
- App.tsx has view toggle between timer, history, stats
- History list and drawer work
- Stats grid displays
- Timer remains functional
</done>
</task>

<task type="auto">
  <name>Verify complete phase integration</name>
  <files>src/App.tsx</files>
  <action>
Verify the complete Phase 3 integration:

1. Build succeeds without errors
2. Test view navigation:
   - Timer view shows timer, controls, note panel (during focus)
   - History view shows filter bar, session list
   - Stats view shows 4 stat cards in 2x2 grid
3. Test history functionality:
   - Click session opens drawer
   - Drawer shows full details
   - Edit note auto-saves
   - Delete with confirmation works
4. Test stats:
   - Shows total focus time today
   - Shows total focus time last 7 days
   - Shows sessions today
   - Shows longest session
5. Run any existing tests
  </action>
  <verify>
- npm run build succeeds
- All views render correctly
- No console errors
- All Phase 3 success criteria met
  </verify>
  <done>
- Full Phase 3 integration complete
- All HIST requirements functional
- All STAT requirements functional
</done>
</task>

</tasks>

<verification>
- Phase 3 features integrated into App.tsx
- View toggle allows switching between Timer, History, Stats
- History and Stats fully functional
- Timer remains unchanged
- Build passes
</verification>

<success_criteria>
- All Phase 3 features (HIST-01 to HIST-08, STAT-01 to STAT-04) accessible via UI
- Phase 3 success criteria from ROADMAP.md met
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-history-stats/03-03-SUMMARY.md`
</output>

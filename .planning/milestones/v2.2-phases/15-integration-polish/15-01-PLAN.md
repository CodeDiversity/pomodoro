---
phase: 15-integration-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Settings.tsx
  - src/components/stats/StreakDisplay.tsx
autonomous: true
requirements: []
must_haves:
  truths:
    - "Import button uses same blue accent as Export button"
    - "Streak display follows app color theme"
    - "Importing state shows visual spinner animation"
  artifacts:
    - path: "src/components/Settings.tsx"
      provides: "Import button with consistent blue styling"
      contains: "ImportButton.*colors.primary"
    - path: "src/components/stats/StreakDisplay.tsx"
      provides: "Streak display with theme colors"
      contains: "from '.*ui/theme'"
  key_links:
    - from: "src/components/Settings.tsx"
      to: "src/components/ui/theme.ts"
      via: "import"
      pattern: "colors\\.primary"
---

<objective>
Fix styling inconsistencies in import button and streak display, and add visual spinner for imports.

Purpose: Ensure all new features follow existing app styling (light mode, blue accents) per phase success criteria.
Output: Updated Settings.tsx and StreakDisplay.tsx with consistent theme usage.
</objective>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-integration-polish/15-CONTEXT.md
@.planning/phases/15-integration-polish/15-RESEARCH.md

# Key findings from research:
- Import button uses green (#10b981) instead of theme primary (#136dec)
- StreakDisplay uses hardcoded colors instead of importing from theme
- Importing state shows text but no spinner animation
</context>

<tasks>

<task type="auto">
  <name>Fix Import button color to use theme blue</name>
  <files>src/components/Settings.tsx</files>
  <action>
Change ImportButton styled component to use colors.primary instead of hardcoded #10b981:

1. At top of file, ensure theme is imported: `import { colors, transitions } from './ui/theme'`
2. Update ImportButton:
   - border: 1px solid ${colors.primary}
   - color: ${colors.primary}
   - &:hover background-color: ${colors.sidebarActive} (light blue)
   - &:focus-visible box-shadow: ... 4px ${colors.primary}

Note: Keep ImportButton separate from other buttons since this is specifically about fixing the inconsistent green color.
  </action>
  <verify>
grep -n "colors.primary" src/components/Settings.tsx | head -20</verify>
  <done>Import button uses blue (#136dec) instead of green (#10b981)</done>
</task>

<task type="auto">
  <name>Update StreakDisplay to use theme colors</name>
  <files>src/components/stats/StreakDisplay.tsx</files>
  <action>
Update StreakDisplay to import and use theme colors:

1. Add import at top: `import { colors } from '../ui/theme'` (adjust path as needed)
2. Update styled components:
   - CurrentStreakCount: color: ${colors.text} (from theme, #1A1A1A)
   - StreakLabel: color: ${colors.textMuted} (from theme, #666666)
   - BestStreakText: color: ${colors.textMuted}
   - ProtectionRow: Keep green (#22c55e) for success indication - this is intentional
   - FlameIcon: Keep orange (#f97316) - this is a visual icon, not brand color (document in comment)

Note: Flame icon stays orange for visual distinction as recommended in research.
  </action>
  <verify>
grep -n "from.*ui/theme" src/components/stats/StreakDisplay.tsx</verify>
  <done>StreakDisplay imports colors from theme and uses them for text elements</done>
</task>

<task type="auto">
  <name>Add visual spinner animation to Importing state</name>
  <files>src/components/Settings.tsx</files>
  <action>
Add CSS spinner animation to the "Importing..." button state:

1. Add a spinner SVG or CSS animation to the ImportButton when isImporting is true
2. Replace simple text "Importing..." with spinner + "Importing..." text
3. Use CSS keyframes for rotation animation

Example implementation:
- Add SpinnerIcon component with spinning animation
- In button: {isImporting ? <><SpinnerIcon /> Importing...</> : 'Import Sessions from CSV'}
  </action>
  <verify>
grep -n "Spinner\|spinning\|keyframes" src/components/Settings.tsx</verify>
  <done>Button shows animated spinner during import instead of static text</done>
</task>

</tasks>

<verification>
Run build to verify no TypeScript errors:
npm run build

Check that all buttons use consistent blue styling:
grep -n "colors.primary" src/components/Settings.tsx
</verification>

<success_criteria>
1. Import button uses blue (#136dec) instead of green
2. StreakDisplay uses theme colors for text elements
3. Importing state shows visual spinner animation
4. Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-integration-polish/15-01-SUMMARY.md`
</output>

---
phase: 23-footer-legal-modals
plan: '01'
type: execute
wave: 1
depends_on: []
files_modified:
  - src/features/ui/uiSlice.ts
  - src/components/Footer.tsx
  - src/components/LegalModal.tsx
  - src/components/legal/PrivacyPolicy.tsx
  - src/components/legal/TermsOfUse.tsx
  - src/App.tsx
autonomous: true
requirements:
  - LEGAL-01
  - LEGAL-02
  - LEGAL-03
  - LEGAL-04
  - LEGAL-05
  - LEGAL-06
  - LEGAL-07
  - LEGAL-08
  - LEGAL-09
  - LEGAL-10

must_haves:
  truths:
    - User can see footer at bottom of main content area
    - User can click Privacy Policy link and see modal with content
    - User can click Terms of Use link and see modal with content
    - User can close legal modals by clicking backdrop
    - User can close legal modals by pressing Escape key
    - User can close legal modals by clicking close button
    - User can see copyright notice in footer
    - Footer displays properly on mobile screens
    - Privacy Policy states data is stored in IndexedDB
    - Terms of Use defines user rights and disclaimers
  artifacts:
    - path: src/features/ui/uiSlice.ts
      provides: Redux state for legal modal visibility
      exports: showPrivacyPolicy, showTermsOfUse, showPrivacyPolicyModal, hidePrivacyPolicyModal, showTermsOfUseModal, hideTermsOfUseModal
    - path: src/components/Footer.tsx
      provides: Footer with links and copyright
      contains: Privacy Policy link, Terms of Use link, copyright notice
    - path: src/components/LegalModal.tsx
      provides: Reusable modal component
      contains: Overlay, Modal, Header, CloseButton, content area, Escape key handler, backdrop click handler
    - path: src/components/legal/PrivacyPolicy.tsx
      provides: Privacy policy content
      contains: IndexedDB storage statement
    - path: src/components/legal/TermsOfUse.tsx
      provides: Terms of use content
      contains: User rights, disclaimers
  key_links:
    - from: src/components/Footer.tsx
      to: src/features/ui/uiSlice.ts
      via: dispatch(showPrivacyPolicyModal), dispatch(showTermsOfUseModal)
      pattern: dispatch\(show(PrivacyPolicy|TermsOfUse)Modal\(\)\)
    - from: src/App.tsx
      to: src/components/Footer.tsx
      via: import and render Footer component
      pattern: import.*Footer.*from.*Footer
    - from: src/App.tsx
      to: src/components/LegalModal.tsx
      via: import, render with privacy policy and terms content
      pattern: LegalModal.*isOpen.*showPrivacyPolicy
---

<objective>
Implement footer with Privacy Policy and Terms of Use modals for the Pomodoro Timer app.
</objective>

<execution_context>
@/Users/michaelrobert/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelrobert/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/milestones/v2.4-phases/23-footer-legal-modals/23-RESEARCH.md

# Key patterns to reuse:
- HelpPanel.tsx: Modal overlay, backdrop click close, Escape key close, close button
- SessionSummary.tsx: Modal state management via Redux
- uiSlice.ts: Redux state for modal visibility
- theme.ts: Design tokens (colors, transitions)
- App.tsx: MainContent has flex: 1, Footer should be placed below ContentArea
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add legal modal state to Redux</name>
  <files>src/features/ui/uiSlice.ts</files>
  <action>
    Extend UIState interface to add:
    - showPrivacyPolicy: boolean
    - showTermsOfUse: boolean

    Add reducers:
    - showPrivacyPolicyModal: sets showPrivacyPolicy to true
    - hidePrivacyPolicyModal: sets showPrivacyPolicy to false
    - showTermsOfUseModal: sets showTermsOfUse to true
    - hideTermsOfUseModal: sets showTermsOfUse to false

    Export the new actions.
  </action>
  <verify>grep -n "showPrivacyPolicy\|showTermsOfUse" src/features/ui/uiSlice.ts</verify>
  <done>UIState has showPrivacyPolicy and showTermsOfUse boolean fields with show/hide actions</done>
</task>

<task type="auto">
  <name>Task 2: Create legal content components</name>
  <files>src/components/legal/PrivacyPolicy.tsx, src/components/legal/TermsOfUse.tsx</files>
  <action>
    Create directory src/components/legal/

    Create PrivacyPolicy.tsx:
    - Use styled-components with theme tokens
    - Include sections: Introduction, Data Collection, Data Storage, Data Usage, Contact Information
    - MUST state: "Your data is stored locally in your browser using IndexedDB. No data is transmitted to any external servers."
    - Use proper heading hierarchy (h2, h3) and paragraph tags

    Create TermsOfUse.tsx:
    - Use styled-components with theme tokens
    - Include sections: Acceptance of Terms, User Rights, Disclaimers, Limitation of Liability, Contact Information
    - Define user rights (use the app, track sessions, view history)
    - Include disclaimer (app provided "as is", no warranties)
    - Use proper heading hierarchy and paragraph tags
  </action>
  <verify>ls -la src/components/legal/ && wc -l src/components/legal/*.tsx</verify>
  <done>Both PrivacyPolicy.tsx and TermsOfUse.tsx exist with complete content including IndexedDB statement and user rights/disclaimers</done>
</task>

<task type="auto">
  <name>Task 3: Create reusable LegalModal component</name>
  <files>src/components/LegalModal.tsx</files>
  <action>
    Create LegalModal.tsx component following HelpPanel.tsx patterns:
    - Use styled-components with theme tokens
    - Props: isOpen (boolean), title (string), content (React.ReactNode), onClose (function)
    - Implement Overlay with backdrop blur and click-to-close
    - Implement Modal container with max-width 600px, max-height 80vh, overflow-y auto
    - Implement Header with title and CloseButton
    - Implement Escape key handler (useEffect listening to keydown)
    - Implement backdrop click handler (handleOverlayClick)
    - Add body overflow: hidden when modal is open
    - Add ARIA attributes: role="dialog", aria-modal="true", aria-labelledby
    - Use animation from theme (modalSlideIn)
  </action>
  <verify>wc -l src/components/LegalModal.tsx && grep -n "role=\"dialog\"\|aria-modal\|handleOverlayClick\|handleKeyDown" src/components/LegalModal.tsx</verify>
  <done>LegalModal component exists with all required modal behaviors: backdrop click close, Escape close, close button, scroll lock, accessibility</done>
</task>

<task type="auto">
  <name>Task 4: Create Footer component</name>
  <files>src/components/Footer.tsx</files>
  <action>
    Create Footer.tsx component:
    - Use styled-components with theme tokens
    - Props: onPrivacyPolicyClick, onTermsOfUseClick (both functions)
    - FooterContainer: flex, justify-content space-between, align-items center, padding 16px 32px, border-top, responsive
    - FooterLinks: flex, gap 24px
    - FooterLink: button with primary color, hover effects, transition
    - Copyright: span with muted text, current year dynamic
    - Mobile responsive: @media (max-width: 480px) flex-direction column, text-align center

    The Footer should display at the bottom of MainContent area.
  </action>
  <verify>wc -l src/components/Footer.tsx && grep -n "@media" src/components/Footer.tsx</verify>
  <done>Footer component exists with Privacy Policy link, Terms of Use link, copyright notice, and mobile responsiveness</done>
</task>

<task type="auto">
  <name>Task 5: Integrate Footer and LegalModals into App.tsx</name>
  <files>src/App.tsx</files>
  <action>
    Import Footer component
    Import LegalModal component
    Import PrivacyPolicy and TermsOfUse content components
    Import new Redux actions from uiSlice

    Add to UI selectors:
    - showPrivacyPolicy = useAppSelector(state => state.ui.showPrivacyPolicy)
    - showTermsOfUse = useAppSelector(state => state.ui.showTermsOfUse)

    Render Footer component:
    - Place after ContentArea closing tag, inside MainContent
    - Pass onPrivacyPolicyClick={() => dispatch(showPrivacyPolicyModal())}
    - Pass onTermsOfUseClick={() => dispatch(showTermsOfUseModal())}

    Render two LegalModal components:
    - One for PrivacyPolicy with isOpen={showPrivacyPolicy}, onClose={() => dispatch(hidePrivacyPolicyModal())}
    - One for TermsOfUse with isOpen={showTermsOfUse}, onClose={() => dispatch(hideTermsOfUseModal())}
  </action>
<verify>grep -n "Footer\|showPrivacyPolicy\|showTermsOfUse" src/App.tsx | head -20</verify>
  <done>App.tsx imports and renders Footer and LegalModal components with proper Redux state integration</done>
</task>

</tasks>

<verification>
- All 10 LEGAL requirements are addressed:
  - LEGAL-01: Footer displays at bottom (via App.tsx placement)
  - LEGAL-02: Privacy Policy link opens modal (via Footer + LegalModal)
  - LEGAL-03: Terms of Use link opens modal (via Footer + LegalModal)
  - LEGAL-04: Modals close on backdrop click (LegalModal handleOverlayClick)
  - LEGAL-05: Modals close on Escape (LegalModal useEffect keydown)
  - LEGAL-06: Modals have close button (LegalModal CloseButton)
  - LEGAL-07: Copyright notice (Footer Copyright component)
  - LEGAL-08: Footer responsive (Footer @media query)
  - LEGAL-09: Privacy Policy states IndexedDB (PrivacyPolicy.tsx content)
  - LEGAL-10: Terms of Use defines rights (TermsOfUse.tsx content)

- Build passes: npm run build
- No TypeScript errors: npx tsc --noEmit
</verification>

<success_criteria>
- Footer visible at bottom of main content area
- Privacy Policy link opens modal with complete content including IndexedDB statement
- Terms of Use link opens modal with complete content including user rights and disclaimers
- Both modals close via backdrop click, Escape key, and close button
- Copyright notice shows current year
- Footer responsive on mobile (375px+)
</success_criteria>

<output>
After completion, create .planning/phases/23-footer-legal-modals/23-01-SUMMARY.md
</output>

---
phase: 07-redux-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/app/store.ts
  - src/app/hooks.ts
  - src/main.tsx
autonomous: true

must_haves:
  truths:
    - "App renders with Redux Provider without console errors"
    - "Redux DevTools extension shows store state and dispatched actions"
    - "Components can import useAppDispatch and useAppSelector with full TypeScript inference"
    - "Store hot-reloads in development without losing state"
    - "Package.json includes @reduxjs/toolkit and react-redux dependencies"
  artifacts:
    - path: "package.json"
      provides: "Redux Toolkit and React-Redux dependencies"
      contains: "@reduxjs/toolkit, react-redux"
    - path: "src/app/store.ts"
      provides: "Redux store configuration with DevTools"
      exports: ["store", "RootState", "AppDispatch"]
      min_lines: 40
    - path: "src/app/hooks.ts"
      provides: "Typed Redux hooks"
      exports: ["useAppDispatch", "useAppSelector"]
      min_lines: 10
    - path: "src/main.tsx"
      provides: "Provider wrapping App component"
      contains: "<Provider store={store}>"
  key_links:
    - from: "src/main.tsx"
      to: "src/app/store.ts"
      via: "Provider store prop"
      pattern: "import.*store.*from.*app/store"
    - from: "src/app/hooks.ts"
      to: "src/app/store.ts"
      via: "RootState and AppDispatch types"
      pattern: "import.*type.*RootState.*AppDispatch"
    - from: "components"
      to: "src/app/hooks.ts"
      via: "useAppDispatch/useAppSelector imports"
      pattern: "useAppDispatch|useAppSelector"
---

<objective>
Install Redux Toolkit dependencies and configure the core Redux infrastructure including store setup, typed hooks, and Provider integration.

Purpose: Establish the foundation for all future Redux state management. Without this foundation, subsequent slice migrations cannot proceed.
Output: Working Redux store with DevTools, typed hooks available for import, and Provider wrapping the application.
</objective>

<execution_context>
@/Users/dev/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-redux-foundation/07-RESEARCH.md

Key decisions from STATE.md:
- Redux Toolkit for state management (locked decision)
- Custom persistence middleware (future phase - not in this plan)
- Maintain hook API compatibility (future phase - not in this plan)

Key findings from RESEARCH.md:
- Use @reduxjs/toolkit ^2.11.0 and react-redux ^9.2.0
- Typed hooks pattern: useDispatch.withTypes<AppDispatch>() (RTK 2.0+ syntax)
- DevTools enabled automatically by configureStore in development
- Vite HMR via import.meta.hot.accept() pattern
- Feature-based folder structure with ducks pattern
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Redux Toolkit dependencies</name>
  <files>package.json</files>
  <action>
    Install @reduxjs/toolkit and react-redux packages using npm.
    Run: npm install @reduxjs/toolkit@^2.11.0 react-redux@^9.2.0
    Verify installation by checking package.json dependencies are updated.
    Do NOT install @types/react-redux - react-redux 9.x includes bundled types.
  </action>
  <verify>npm list @reduxjs/toolkit react-redux shows installed versions</verify>
  <done>package.json contains @reduxjs/toolkit and react-redux in dependencies section</done>
</task>

<task type="auto">
  <name>Task 2: Create Redux store with DevTools</name>
  <files>src/app/store.ts</files>
  <action>
    Create src/app/store.ts with configureStore setup:
    1. Create src/app/ directory if it doesn't exist
    2. Import { configureStore } from '@reduxjs/toolkit'
    3. Create empty reducer object (slices added in future phases)
    4. Export store = configureStore({ reducer: {} })
    5. Export type RootState = ReturnType<typeof store.getState>
    6. Export type AppDispatch = typeof store.dispatch
    7. Add Vite HMR support: if (import.meta.hot) { import.meta.hot.accept() }
    8. Enable DevTools automatically (devTools: true is default in development)

    The store should have NO reducers yet - this is intentional. Reducers will be added incrementally in subsequent phases.
  </action>
  <verify>cat src/app/store.ts shows configureStore with proper types and HMR</verify>
  <done>src/app/store.ts exists with store export, RootState type, AppDispatch type, and HMR support</done>
</task>

<task type="auto">
  <name>Task 3: Create typed hooks</name>
  <files>src/app/hooks.ts</files>
  <action>
    Create src/app/hooks.ts with typed versions of useDispatch and useSelector:
    1. Import { useDispatch, useSelector } from 'react-redux'
    2. Import type { RootState, AppDispatch } from './store'
    3. Export useAppDispatch = useDispatch.withTypes<AppDispatch>()
    4. Export useAppSelector = useSelector.withTypes<RootState>()

    Use the RTK 2.0+ .withTypes<> pattern as documented in research, NOT the old useDispatch<AppDispatch>() syntax.
  </action>
  <verify>cat src/app/hooks.ts shows useAppDispatch and useAppSelector exports</verify>
  <done>src/app/hooks.ts exists with properly typed useAppDispatch and useAppSelector exports</done>
</task>

<task type="auto">
  <name>Task 4: Wrap App with Provider</name>
  <files>src/main.tsx</files>
  <action>
    Modify src/main.tsx to wrap the application with Redux Provider:
    1. Import { Provider } from 'react-redux'
    2. Import { store } from './app/store'
    3. Wrap <App /> with <Provider store={store}>
    4. Keep StrictMode as outer wrapper

    Before:
    <StrictMode>
      <App />
    </StrictMode>

    After:
    <StrictMode>
      <Provider store={store}>
        <App />
      </Provider>
    </StrictMode>
  </action>
  <verify>cat src/main.tsx contains Provider import and wrapper</verify>
  <done>src/main.tsx wraps App with Provider, imports store from ./app/store</done>
</task>

<task type="auto">
  <name>Task 5: Verify build and DevTools</name>
  <files>src/app/store.ts, src/main.tsx</files>
  <action>
    Verify the Redux setup works correctly:
    1. Run npm run build to ensure TypeScript compiles without errors
    2. Run npm run dev to start the development server
    3. Open browser and verify app renders without console errors
    4. Open Redux DevTools extension and confirm:
       - Store state is visible (empty object is fine)
       - @@INIT action appears in action list
       - No serialization errors in console

    If DevTools extension is not installed, verify no errors occur - DevTools integration should fail gracefully.
  </action>
  <verify>npm run build completes without TypeScript errors</verify>
  <done>Build succeeds, app renders, Redux DevTools shows store state and @@INIT action</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Run npm run build - should complete with no TypeScript errors
2. Run npm run dev - app should render without console errors
3. Open Redux DevTools - should show empty state object and @@INIT action
4. Verify imports work: Create a test component importing useAppDispatch and useAppSelector - TypeScript should infer types correctly
5. Check HMR: Make a change to store.ts - state should persist (no full page reload)
</verification>

<success_criteria>
1. Package.json includes @reduxjs/toolkit and react-redux dependencies
2. src/app/store.ts exports store, RootState type, and AppDispatch type
3. src/app/hooks.ts exports useAppDispatch and useAppSelector with full TypeScript inference
4. src/main.tsx wraps App with Provider
5. App renders without errors
6. Redux DevTools extension shows store state
7. npm run build completes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/07-redux-foundation/07-01-SUMMARY.md`
</output>

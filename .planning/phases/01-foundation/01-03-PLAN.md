---
phase: 01-foundation
plan: '03'
type: execute
wave: 3
depends_on: [01-01, 01-02]
files_modified: []
autonomous: true
requirements: [TMR-04, TMR-05, TMR-06, TMR-07, TMR-08, TMR-11, KEY-01, KEY-02, KEY-03]

must_haves:
  truths:
    - "Start control begins countdown"
    - "Pause control stops countdown temporarily"
    - "Resume control continues from paused time"
    - "Skip control ends current session early and moves to next"
    - "Reset control returns to initial duration for current mode"
    - "Auto-start toggle option (off by default) starts next session automatically"
    - "Space key toggles Start/Pause/Resume"
    - "Enter key prevents form submit when focus on note field"
    - "Cmd/Ctrl+K focuses search box in history (future phase)"
  artifacts:
    - path: "src/components/TimerControls.tsx"
      provides: "Start/Pause/Resume/Reset/Skip buttons"
    - path: "src/components/HelpPanel.tsx"
      provides: "Keyboard shortcuts display panel"
    - path: "src/hooks/useKeyboardShortcuts.ts"
      provides: "Space key toggle, keyboard event handling"
    - path: "src/components/App.tsx"
      provides: "Main app wiring timer + controls + help"
  key_links:
    - from: "src/hooks/useKeyboardShortcuts.ts"
      to: "src/hooks/useTimer.ts"
      via: "calls toggleTimer action"
    - from: "src/components/App.tsx"
      to: "src/components/TimerDisplay.tsx"
      via: "renders TimerDisplay with timer state"
    - from: "src/components/App.tsx"
      to: "src/components/TimerControls.tsx"
      via: "renders controls with timer actions"
---

<objective>
Implement timer controls UI, keyboard shortcuts, and help panel for Phase 1 completion.
</objective>

<execution_context>
@/Users/michaelrobert/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelrobert/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create TimerControls component</name>
  <files>src/components/TimerControls.tsx</files>
  <action>
    Create timer controls component per user decision:
    1. Primary control: Play/Pause button (prominent, visible)
    2. Secondary controls in menu: Reset, Skip (less prominent)
    3. Use icons + text labels per decision
    4. Button labels:
       - Start (when stopped): "Start" + play icon
       - Pause (when running): "Pause" + pause icon
       - Resume (when paused): "Resume" + play icon
       - Reset: "Reset" + reset icon
       - Skip: "Skip" + skip icon

    Actions:
    - Start: begins countdown (TMR-04)
    - Pause: stops countdown temporarily (TMR-05)
    - Resume: continues from paused time (TMR-06)
    - Skip: ends current session early, moves to next (TMR-07)
    - Reset: returns to initial duration for current mode (TMR-08)

    Skip logic: Focus -> Break (type based on session count), Break -> Focus + increment session
  </action>
  <verify>Run `npm run build` to verify component compiles</verify>
  <done>TimerControls implements all timer control actions</done>
</task>

<task type="auto">
  <name>Create useKeyboardShortcuts hook</name>
  <files>src/hooks/useKeyboardShortcuts.ts</files>
  <action>
    Create keyboard shortcuts hook:
    1. Space key: toggle Start/Pause/Resume (KEY-01)
       - If stopped: start
       - If running: pause
       - If paused: resume
    2. Enter key: prevent form submit (KEY-02) - for future note field
    3. Cmd/Ctrl+K: focus search box (KEY-03) - placeholder for future phase

    Implementation:
    - Use useEffect with 'keydown' event listener
    - Check event.key for ' ' (Space), 'Enter', 'k' (with Meta/Ctrl)
    - Prevent default for Space to avoid page scroll
    - Return cleanup function to remove listener

    Note: Cmd/Ctrl+K functionality will be implemented in Phase 3 (History), but hook should handle the shortcut to prevent browser default
  </action>
  <verify>Run `npm run build` to verify hook compiles</verify>
  <done>useKeyboardShortcuts handles Space, Enter, Cmd/Ctrl+K</done>
</task>

<task type="auto">
  <name>Create HelpPanel component</name>
  <files>src/components/HelpPanel.tsx</files>
  <action>
    Create help panel showing keyboard shortcuts:
    1. Display keyboard shortcuts in a panel (not on buttons per decision)
    2. Shortcuts to show:
       - Space: Start/Pause/Resume
       - Cmd/Ctrl+K: Search (for future)
    3. Panel can be toggled open/closed
    4. Position: bottom or side of timer, unobtrusive

    Per user decision: "Keyboard shortcuts shown in a help panel (not on buttons)"
  </action>
  <verify>Run `npm run build` to verify component compiles</verify>
  <done>HelpPanel displays keyboard shortcuts</done>
</task>

<task type="auto">
  <name>Create auto-start toggle setting</name>
  <files>src/components/Settings.tsx</files>
  <action>
    Create settings component with auto-start toggle:
    1. Toggle switch for auto-start (TMR-11)
    2. Off by default (per requirement)
    3. When enabled: next session starts automatically after current ends
    4. Store preference in IndexedDB (DATA-03)
    5. Load preference on app start

    Implementation:
    - Add autoStart boolean to timer state
    - When session ends: if autoStart enabled, call start() automatically
    - Toggle component with on/off state
  </action>
  <verify>Run `npm run build` to verify component compiles</verify>
  <done>Auto-start toggle saves preference and auto-starts next session</done>
</task>

<task type="auto">
  <name>Wire up main App component</name>
  <files>src/App.tsx</files>
  <action>
    Assemble main application:
    1. App uses useTimer hook for timer state and actions
    2. Render TimerDisplay with timer state
    3. Render TimerControls with timer actions
    4. Render HelpPanel for keyboard shortcuts
    5. Render Settings with auto-start toggle
    6. Use useKeyboardShortcuts hook for global keyboard handling
    7. Pass timer actions to controls and keyboard hook

    Layout per user decision:
    - Timer display: bold, prominent, hero element
    - Mode badge: color-coded background
    - Session counter: visible
    - Controls: minimal visible (Play/Pause), secondary in menu
  </action>
  <verify>Run `npm run build` to verify app compiles</verify>
  <done>Main App component wired with all timer features</done>
</task>

</tasks>

<verification>
- Start begins countdown (TMR-04)
- Pause stops countdown (TMR-05)
- Resume continues from paused time (TMR-06)
- Skip ends session early, moves to next (TMR-07)
- Reset returns to initial duration (TMR-08)
- Auto-start toggle works (TMR-11)
- Space toggles Start/Pause/Resume (KEY-01)
- Enter prevents form submit (KEY-02)
- Cmd/Ctrl+K handled (KEY-03)
</verification>

<success_criteria>
- Project builds without errors
- Timer controls respond to clicks
- Keyboard shortcuts work
- Auto-start toggle persists preference
- All Phase 1 requirements met
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>

---
phase: 06-redesign
plan: 03
type: execute
wave: 3
depends_on: [06-01, 06-02]
files_modified:
  - src/components/history/HistoryList.tsx
  - src/components/history/HistoryItem.tsx
  - src/components/history/HistoryFilterBar.tsx
  - src/App.tsx
autonomous: false

must_haves:
  truths:
    - History view shows header with weekly focus hours
    - Search bar with filter dropdown and calendar icon
    - Sessions grouped by date with headers
    - Session cards show status icon, title, time, duration, tags
    - Green checkmark for completed sessions
    - Tags display as blue pills
    - Load Older Sessions button at bottom
    - Blue FAB (play icon) in bottom right
  artifacts:
    - path: src/components/history/HistoryList.tsx
      provides: History list with header and grouping
      exports: [HistoryList]
    - path: src/components/history/HistoryItem.tsx
      provides: Individual session card
      exports: [HistoryItem]
    - path: src/components/history/HistoryFilterBar.tsx
      provides: Search and filter controls
      exports: [HistoryFilterBar]
  key_links:
    - from: src/components/history/HistoryList.tsx
      to: src/components/history/HistoryItem.tsx
      via: component render
    - from: src/components/history/HistoryList.tsx
      to: src/components/history/HistoryFilterBar.tsx
      via: component render
---

<objective>
Redesign the history view with card-based layout, date grouping, search/filter UI, and weekly stats header. Transform the list into a rich, scannable session history.

Purpose: Create a visually rich history view that helps users review their productivity patterns.
Output: Updated HistoryList with weekly stats header, redesigned HistoryItem cards, enhanced HistoryFilterBar with calendar.
</objective>

<execution_context>
@/Users/dev/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/06-redesign/06-CONTEXT.md
@/Users/dev/Documents/youtube/pomodoro/src/components/history/HistoryList.tsx

## Current State
- HistoryList: Simple list with filter bar at top
- HistoryItem: Basic card with session info
- FilterBar: Search input and date filter dropdown

## Target State (from CONTEXT.md)
- Header: "You've focused for X hours this week"
- Search bar with filter dropdown and calendar icon
- Date grouping: "TODAY, OCT 24" headers
- Session cards with:
  - Green checkmark status icon
  - Session title and time range
  - Duration badge
  - Blue tag pills
  - Notes preview
- Load Older Sessions button
- Blue FAB (play icon) bottom right
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update HistoryFilterBar with search and calendar</name>
  <files>src/components/history/HistoryFilterBar.tsx</files>
  <action>
Redesign HistoryFilterBar with enhanced search and calendar:

1. Container layout:
   - Display: flex
   - Gap: 12px
   - Margin-bottom: 24px
   - Align items: center

2. Search input:
   - Flex: 1
   - Background: white
   - Border: 1px solid #E0E0E0
   - Border-radius: 8px
   - Padding: 10px 16px
   - Padding-left: 40px (for search icon)
   - Placeholder: "Search sessions..."
   - Search icon (inline SVG, 18px, #666) positioned absolute left 12px
   - Focus: border-color #0066FF

3. Filter dropdown:
   - Background: white
   - Border: 1px solid #E0E0E0
   - Border-radius: 8px
   - Padding: 10px 16px
   - Min-width: 120px
   - Options: All Time, Today, Last 7 Days, Last 30 Days
   - Chevron down icon on right

4. Calendar button:
   - 40px square
   - Background: white
   - Border: 1px solid #E0E0E0
   - Border-radius: 8px
   - Calendar icon (inline SVG, 18px)
   - Hover: background #F5F5F5
   - For now, can be a placeholder or trigger same filter

5. Keep existing props interface
6. Use theme colors
  </action>
  <verify>grep -q "Search sessions" src/components/history/HistoryFilterBar.tsx && grep -q "calendar" src/components/history/HistoryFilterBar.tsx || grep -q "Calendar" src/components/history/HistoryFilterBar.tsx</verify>
  <done>HistoryFilterBar has search with icon, filter dropdown, and calendar button</done>
</task>

<task type="auto">
  <name>Task 2: Redesign HistoryItem as card</name>
  <files>src/components/history/HistoryItem.tsx</files>
  <action>
Redesign HistoryItem as a modern card:

1. Card container:
   - Background: white
   - Border: 1px solid #E8E8E8
   - Border-radius: 12px
   - Padding: 16px 20px
   - Margin-bottom: 12px
   - Box-shadow: 0 1px 3px rgba(0,0,0,0.04)
   - Hover: box-shadow 0 4px 12px rgba(0,0,0,0.08), transform translateY(-1px)
   - Cursor: pointer
   - Transition: all 200ms ease

2. Layout structure (flex row):
   - Left: Status icon (green checkmark circle)
     - 32px diameter circle
     - Background: #E8F5E9 (light green)
     - Checkmark icon: #27AE60 (green)
   - Middle: Content (flex-1)
     - Title: font-weight 600, font-size 1rem, color #1A1A1A
     - Time range: font-size 0.85rem, color #666
     - Notes preview: font-size 0.85rem, color #888, max 2 lines, truncate with ellipsis
   - Right: Meta (align right)
     - Duration badge:
       - Background: #F5F5F5
       - Padding: 4px 10px
       - Border-radius: 12px
       - Font-size: 0.8rem
       - Font-weight: 500
       - Color: #666
     - Tags row below badge:
       - Display: flex, gap: 6px, margin-top: 8px
       - Tag pills: background #F0F7FF, color #0066FF, border 1px solid #0066FF, border-radius 12px, padding 2px 10px, font-size 0.75rem

3. Keep existing props interface
4. Format time range: "2:30 PM - 2:55 PM" from startTimestamp and duration
5. Extract session title from first line of notes or show "Focus Session" as default
6. Inline SVG icons:
   - Checkmark: check in circle (20x20)
  </action>
  <verify>grep -q "border-radius: 12px" src/components/history/HistoryItem.tsx && grep -q "checkmark\|Checkmark\|check" src/components/history/HistoryItem.tsx</verify>
  <done>HistoryItem renders as card with status icon, title, time, duration, and tags</done>
</task>

<task type="auto">
  <name>Task 3: Redesign HistoryList with header and date grouping</name>
  <files>src/components/history/HistoryList.tsx</files>
  <action>
Redesign HistoryList with weekly stats header and date grouping:

1. Header section:
   - Weekly focus hours display:
     - Large text: "You've focused for 12.5 hours this week"
     - "12.5 hours" in #0066FF (blue), font-weight 700, font-size 1.5rem
     - Rest of text in #1A1A1A
     - Margin-bottom: 24px
   - Calculate from sessions data (sum of completed session durations in last 7 days, convert to hours with 1 decimal)

2. After header: HistoryFilterBar

3. Date grouping:
   - Group sessions by date (Today, Yesterday, Monday, October 24, etc.)
   - Section header for each group:
     - Font-size: 0.75rem
     - Font-weight: 600
     - Color: #666
     - Text-transform: uppercase
     - Letter-spacing: 1px
     - Margin: 24px 0 12px 0
   - Helper function to format date headers:
     - Same day: "Today"
     - Yesterday: "Yesterday"
     - This week: Day name ("Monday", "Tuesday")
     - Older: "October 24" format

4. Session list:
   - Map grouped sessions to HistoryItem components
   - Keep existing empty state and loading state

5. Load more button:
   - Full width within container
   - Background: transparent
   - Border: 1px solid #E0E0E0
   - Border-radius: 8px
   - Padding: 12px
   - Color: #666
   - Hover: background #F5F5F5
   - Icon: chevron-down before text

6. Remove max-width: 800px constraint, let it fill available space
7. Keep all existing props and functionality
8. Add FAB (Floating Action Button):
   - Position: fixed, bottom 24px, right 24px
   - 56px diameter circle
   - Background: #0066FF
   - Icon: Play (â–¶) in white, 24px
   - Box-shadow: 0 4px 12px rgba(0, 102, 255, 0.4)
   - Hover: transform scale(1.05), box-shadow 0 6px 16px rgba(0, 102, 255, 0.5)
   - On click: switch to timer view and start timer (use onViewChange from props if available, or add prop)
  </action>
  <verify>grep -q "You've focused for" src/components/history/HistoryList.tsx && grep -q "Today\|TODAY" src/components/history/HistoryList.tsx</verify>
  <done>HistoryList has weekly stats header, date grouping, and FAB</done>
</task>

<task type="auto">
  <name>Task 4: Update App.tsx history view layout</name>
  <files>src/App.tsx</files>
  <action>
Update App.tsx to support the new history view layout:

1. History view container:
   - Full width within main content area
   - Padding: 24px
   - Max-width: 900px
   - Margin: 0 auto

2. Pass additional props to HistoryList if needed:
   - onStartTimer: function to switch to timer view and start
   - This enables the FAB to work

3. Ensure the HistoryList has proper container styling
4. Keep HistoryDrawer integration unchanged
5. The FAB in HistoryList should be able to trigger view change back to timer
  </action>
  <verify>grep -q "HistoryList" src/App.tsx && grep -q "onStartTimer\|onViewChange" src/App.tsx || true</verify>
  <done>App.tsx properly renders history view with new layout</done>
</task>

</tasks>

<verification>
- History shows weekly focus hours in header
- Search bar with icon is prominent
- Filter dropdown and calendar button visible
- Sessions grouped by date with headers
- Cards have green checkmark, title, time, duration badge
- Tags appear as blue pills
- FAB visible in bottom right
</verification>

<success_criteria>
- HistoryList has weekly stats calculation and display
- Date grouping shows Today/Yesterday/Date headers
- HistoryItem cards have modern styling with hover effects
- HistoryFilterBar has search icon and calendar button
- FAB switches to timer view
- Visual design matches mockup direction
</success_criteria>

<output>
After completion, create `.planning/phases/06-redesign/06-03-SUMMARY.md`
</output>

---
phase: 06.1-timer-refinement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/App.tsx
  - src/components/TimerDisplay.tsx
  - src/components/TimerControls.tsx
  - src/components/NotePanel.tsx
  - src/components/TagInput.tsx
autonomous: true

must_haves:
  truths:
    - "Timer view has full-height split panel layout (60% left, 40% right)"
    - "Top bar shows session status indicator with dot and 'Focus Session Active' text"
    - "Timer display shows 'REMAINING' label below the time"
    - "Daily goal card is positioned at bottom-left of timer pane with 'DAILY GOAL' label, '4/8 Sessions' text, progress bar, and percentage"
    - "Timer controls are arranged horizontally: Reset (left) | Play/Pause (center, larger) | Skip (right)"
    - "Right panel has Complete Session button at the bottom with dark background and checkmark icon"
    - "Right panel header shows 'Active Session' title with 'Configure your current focus task' subtitle"
    - "Tags display with # prefix and have remove (x) buttons"
  artifacts:
    - path: "src/App.tsx"
      provides: "Full-height split layout, top bar with status indicator, repositioned Complete Session button"
      min_lines: 500
    - path: "src/components/TimerDisplay.tsx"
      provides: "REMAINING label, repositioned daily goal card with percentage"
      exports: ["default"]
    - path: "src/components/TimerControls.tsx"
      provides: "Horizontal button layout (reset | play | skip)"
      exports: ["default"]
    - path: "src/components/NotePanel.tsx"
      provides: "Updated header with subtitle, full-height structure"
      exports: ["default"]
    - path: "src/components/TagInput.tsx"
      provides: "Tags with # prefix styling"
      exports: ["default"]
  key_links:
    - from: "src/App.tsx"
      to: "TimerDisplay, TimerControls, NotePanel, TagInput"
      via: "Component imports and props passing"
      pattern: "import.*from.*components"
    - from: "TimerControls"
      to: "parent timer state"
      via: "onStart, onPause, onResume, onReset, onSkip callbacks"
      pattern: "onClick.*handle"
---

<objective>
Refine the timer view layout to match the mockup: full-height split panel, repositioned daily goal indicator, updated top bar with session status, horizontal timer controls, and restructured right panel with Complete Session button at bottom.

Purpose: Improve the visual hierarchy and usability of the timer view based on the refined design mockup.
Output: Updated App.tsx and component files with the new layout structure.
</objective>

<execution_context>
@/Users/dev/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-redesign/06-01-SUMMARY.md
@.planning/phases/06-redesign/06-02-SUMMARY.md

# Current component implementations
@/Users/dev/Documents/youtube/pomodoro/src/App.tsx
@/Users/dev/Documents/youtube/pomodoro/src/components/TimerDisplay.tsx
@/Users/dev/Documents/youtube/pomodoro/src/components/TimerControls.tsx
@/Users/dev/Documents/youtube/pomodoro/src/components/NotePanel.tsx
@/Users/dev/Documents/youtube/pomodoro/src/components/TagInput.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update App.tsx with full-height split layout and top bar</name>
  <files>src/App.tsx</files>
  <action>
    Modify App.tsx to implement the new layout structure:

    1. **Top Bar Updates:**
       - Replace the current TopBar (HelpPanel + Settings buttons on right) with new design
       - Left side: Status indicator dot (green #27ae60 when session active) + "Focus Session Active" text
       - Right side: Keep Settings button (remove HelpPanel or relocate - use discretion)
       - Add inline SVG icons for status dot and any new icons needed

    2. **Full-Height Split Layout:**
       - Modify SplitPaneContainer to use full viewport height (minus top bar)
       - LeftPane: 60% width, flex column, justify-content: space-between
       - RightPane: 40% width, flex column with Complete Session button at bottom
       - Ensure both panes stretch to fill available height

    3. **Right Pane Restructure:**
       - Move CompleteSessionButton to the bottom of RightPane (use margin-top: auto or flex justification)
       - Add flex: 1 to content area above button so it takes available space
       - Keep ProTipCard above the Complete Session button

    4. **Styling:**
       - Use existing color tokens from theme.ts where available
       - Status dot: 8px circle, green when session active (isRunning || startTime !== null)
       - Top bar background: white or transparent based on current design
       - Maintain responsive breakpoint at 900px for mobile stacking

    Note: Notification bell and user avatar are DEFERRED per context - do not implement.
  </action>
  <verify>
    npm run build passes without errors
    App.tsx renders without runtime errors
  </verify>
  <done>
    Top bar shows status indicator with green dot and "Focus Session Active" text on left
    Split layout uses full height with left pane at ~60% and right pane at ~40%
    Complete Session button is positioned at bottom of right panel
    Responsive layout stacks vertically below 900px
  </done>
</task>

<task type="auto">
  <name>Task 2: Update TimerDisplay with REMAINING label and repositioned daily goal</name>
  <files>src/components/TimerDisplay.tsx</files>
  <action>
    Modify TimerDisplay.tsx to match mockup:

    1. **Add REMAINING Label:**
       - Add "REMAINING" text label below the TimeText in the circle
       - Style: uppercase, 0.75rem, color: #666, letter-spacing: 1px, margin-top: 4px
       - Position centered below the time display

    2. **Reposition Daily Goal Card:**
       - Move DailyGoalContainer to be positioned at bottom of the timer section
       - In the new layout (App.tsx left pane), this will naturally sit at bottom due to space-between
       - Update DailyGoal styling to match mockup:
         - Add "DAILY GOAL" label above the progress (uppercase, 0.7rem, color: #666, letter-spacing: 1px)
         - Keep "4/8 Sessions" text
         - Keep progress bar
         - Add percentage text (e.g., "50%") to the right of progress bar or below

    3. **Layout within LeftPane:**
       - Ensure Container uses flex-direction: column with gap distribution
       - The circular timer section should be centered, daily goal at bottom

    4. **Circular Progress (if needed):**
       - Current implementation has continuous ring - mockup shows segmented/gapped ring
       - This is Claude's discretion: either keep current smooth ring OR update to show 4 arc segments
       - If updating: use stroke-dasharray with gaps to create 4 segments representing 25% each
  </action>
  <verify>
    npm run build passes
    TimerDisplay renders with REMAINING label visible below time
    Daily goal card shows DAILY GOAL label, session count, progress bar, and percentage
  </verify>
  <done>
    REMAINING label appears below the time display in the circular timer
    Daily goal card displays "DAILY GOAL" label, "X/8 Sessions" text, progress bar, and percentage
    Component fits properly within left pane layout
  </done>
</task>

<task type="auto">
  <name>Task 3: Update TimerControls to horizontal layout (reset | play | skip)</name>
  <files>src/components/TimerControls.tsx</files>
  <action>
    Redesign TimerControls.tsx to horizontal button layout:

    1. **Layout Change:**
       - Change Container from flex-direction: column to row
       - Arrange buttons horizontally: Reset (left) | Play/Pause (center) | Skip (right)
       - Use gap: 16px between buttons
       - Center the entire row

    2. **Button Sizing:**
       - Play/Pause button: Keep 64px diameter (primary action, larger)
       - Reset and Skip buttons: 48px diameter (smaller than primary, equal size to each other)
       - Both secondary buttons should have consistent sizing

    3. **Button Styling:**
       - Play/Pause: Keep current blue (#0066FF) styling with shadow
       - Reset and Skip: Use subtle styling - light gray background (#F5F5F5) or transparent with border
       - On hover: slight background darken
       - Icons: Keep current inline SVG icons, ensure they scale appropriately for 48px buttons

    4. **Order:**
       - Left: Reset button (with ResetIcon)
       - Center: Play/Pause button (larger, with PlayIcon/PauseIcon)
       - Right: Skip button (with SkipIcon)

    5. **Accessibility:**
       - Keep aria-labels and title attributes
       - Maintain focus-visible rings
  </action>
  <verify>
    npm run build passes
    TimerControls renders three buttons in horizontal row
    Play/Pause is visually larger than Reset and Skip
    Buttons are ordered: Reset | Play/Pause | Skip
  </verify>
  <done>
    Buttons arranged horizontally: Reset (left), Play/Pause (center, larger), Skip (right)
    Play/Pause maintains blue primary styling with 64px size
    Reset and Skip are 48px with subtle secondary styling
    All buttons functional with proper callbacks
  </done>
</task>

<task type="auto">
  <name>Task 4: Update NotePanel header and structure</name>
  <files>src/components/NotePanel.tsx</files>
  <action>
    Modify NotePanel.tsx to match mockup design:

    1. **Header Update:**
       - Current: Single "Active Session" header
       - New: Two-line header
         - Title: "Active Session" (larger, 1.1rem, font-weight: 600)
         - Subtitle: "Configure your current focus task" (smaller, 0.85rem, color: #666)
       - Use flex column for header section

    2. **Task Input Section:**
       - Keep current "What are you working on?" label
       - Update placeholder to match mockup: "What are you working on?" (current is "Enter your task...")
       - Add icon to the left of input field (inline SVG, 20px, gray color)
       - Icon options: briefcase, document, or task icon (use discretion)

    3. **Session Notes Section:**
       - Add "SESSION NOTES" label above toolbar (uppercase, 0.7rem, color: #666, letter-spacing: 1px)
       - Keep current formatting toolbar (Bold, List, Link)
       - Update textarea placeholder to match mockup style: "Brainstorming key UI components..." or similar

    4. **Full Height:**
       - Ensure Panel uses flex: 1 to fill available space in right pane
       - Textarea should flex to fill remaining space (flex: 1 on textarea container)

    Note: Rich text formatting is DEFERRED - toolbar can remain UI-only as it currently is.
  </action>
  <verify>
    npm run build passes
    NotePanel shows "Active Session" title with "Configure your current focus task" subtitle
    Task input has icon on left side
    SESSION NOTES label appears above toolbar
  </verify>
  <done>
    Header displays title "Active Session" with subtitle "Configure your current focus task"
    Task input field has icon prefix and updated placeholder
    SESSION NOTES section label added above formatting toolbar
    Panel fills available height in right pane
  </done>
</task>

<task type="auto">
  <name>Task 5: Update TagInput with # prefix styling</name>
  <files>src/components/TagInput.tsx</files>
  <action>
    Modify TagInput.tsx to add # prefix to tags:

    1. **Tag Display:**
       - Update Pill component to display tags with # prefix
       - Change: `{tag}` to `#{tag}` in the render
       - Keep existing styling (light blue background, blue border, rounded pill shape)

    2. **Remove Button:**
       - Ensure remove (x) button is clearly visible and styled
       - Current implementation has Ã— button - verify it's visible and accessible
       - Position: inside the pill, right side

    3. **Add Tag Button:**
       - Current uses input field with placeholder "+ Add Tag"
       - Keep this pattern but ensure styling matches mockup aesthetic
       - Input should have consistent border-radius and focus states

    4. **TAGS Section Label:**
       - Note: This might be added in App.tsx when composing components
       - If TagInput is responsible for its own label, add "TAGS" label above tags container
       - Style: uppercase, 0.7rem, color: #666, letter-spacing: 1px, margin-bottom: 8px

    5. **Styling Consistency:**
       - Ensure tags have proper spacing (gap: 8px)
       - Remove button hover effect should be subtle
  </action>
  <verify>
    npm run build passes
    Tags display with # prefix (e.g., #work, #design)
    Remove (x) button visible on each tag
  </verify>
  <done>
    Each tag displays with # prefix (e.g., #work, #design)
    Tags have remove (x) buttons that function correctly
    Input field maintains "+ Add Tag" placeholder with consistent styling
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Run `npm run build` - must pass without errors
2. Run `npm run dev` and verify timer view in browser
3. Check visual alignment matches mockup:
   - Full-height split panel (60/40 split)
   - Top bar with green status dot and "Focus Session Active"
   - Timer shows REMAINING label
   - Daily goal card at bottom-left with DAILY GOAL label and percentage
   - Horizontal controls: Reset | Play/Pause | Skip
   - Right panel has Active Session header with subtitle
   - Complete Session button at bottom of right panel
   - Tags show with # prefix
</verification>

<success_criteria>
- Timer view has full-height split panel layout with 60/40 split
- Top bar displays session status indicator (green dot + "Focus Session Active")
- Timer display includes "REMAINING" label below time
- Daily goal card positioned at bottom-left with "DAILY GOAL" label, progress bar, and percentage
- Timer controls arranged horizontally: Reset | Play/Pause (larger) | Skip
- Right panel header shows "Active Session" with "Configure your current focus task" subtitle
- Complete Session button at bottom of right panel with dark background
- Tags display with # prefix and have remove buttons
- Build passes without errors
- All existing functionality preserved (timer, notes, tags, session completion)
</success_criteria>

<output>
After completion, create `.planning/phases/06.1-timer-refinement/06.1-01-SUMMARY.md`
</output>
